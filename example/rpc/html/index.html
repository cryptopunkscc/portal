<!DOCTYPE html>
<html lang="en">
<script src="portal.js"></script>
<script>
  async function rpc() {
    portal.log(portal.platform)

    const rpc = portal.rpc
    let client = await rpc.target("example.rpc.js")
      // .conn() // Uncomment to proceed on single connection
    client = client.bind("get", "sum")
    console.log(client)

    let result = await client.get("Hello from front")
    alert(JSON.stringify(result))

    result = await client.sum(1, 2)
    alert(result)

    await client.close()
  }

  rpc().catch(console.log)
</script>
</html>
