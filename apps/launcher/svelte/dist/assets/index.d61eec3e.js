(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function m(){}function _t(e){return e()}function it(){return Object.create(null)}function L(e){e.forEach(_t)}function ht(e){return typeof e=="function"}function F(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let I;function ct(e,t){return I||(I=document.createElement("a")),I.href=t,e===I.href}function yt(e){return Object.keys(e).length===0}function vt(e,...t){if(e==null)return m;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function bt(e,t,n){e.$$.on_destroy.push(vt(t,n))}function d(e,t){e.appendChild(t)}function X(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function $t(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function K(){return M(" ")}function qt(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function p(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function At(e){return Array.from(e.childNodes)}function T(e,t){t=""+t,e.data!==t&&(e.data=t)}let R;function x(e){R=e}function jt(){if(!R)throw new Error("Function called outside component initialization");return R}function mt(e){jt().$$.on_destroy.push(e)}const N=[],lt=[];let C=[];const ut=[],Jt=Promise.resolve();let U=!1;function Nt(){U||(U=!0,Jt.then(wt))}function V(e){C.push(e)}const G=new Set;let j=0;function wt(){if(j!==0)return;const e=R;do{try{for(;j<N.length;){const t=N[j];j++,x(t),Ct(t.$$)}}catch(t){throw N.length=0,j=0,t}for(x(null),N.length=0,j=0;lt.length;)lt.pop()();for(let t=0;t<C.length;t+=1){const n=C[t];G.has(n)||(G.add(n),n())}C.length=0}while(N.length);for(;ut.length;)ut.pop()();U=!1,G.clear(),x(e)}function Ct(e){if(e.fragment!==null){e.update(),L(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(V)}}function Ot(e){const t=[],n=[];C.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),C=t}const B=new Set;let A;function Et(){A={r:0,c:[],p:A}}function St(){A.r||L(A.c),A=A.p}function O(e,t){e&&e.i&&(B.delete(e),e.i(t))}function z(e,t,n,r){if(e&&e.o){if(B.has(e))return;B.add(e),A.c.push(()=>{B.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function gt(e){e&&e.c()}function tt(e,t,n,r){const{fragment:s,after_update:a}=e.$$;s&&s.m(t,n),r||V(()=>{const o=e.$$.on_mount.map(_t).filter(ht);e.$$.on_destroy?e.$$.on_destroy.push(...o):L(o),e.$$.on_mount=[]}),a.forEach(V)}function et(e,t){const n=e.$$;n.fragment!==null&&(Ot(n.after_update),L(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function xt(e,t){e.$$.dirty[0]===-1&&(N.push(e),Nt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function nt(e,t,n,r,s,a,o,i=[-1]){const c=R;x(e);const l=e.$$={fragment:null,ctx:[],props:a,update:m,not_equal:s,bound:it(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:it(),dirty:i,skip_bound:!1,root:t.target||c.$$.root};o&&o(l.root);let v=!1;if(l.ctx=n?n(e,t.props||{},(_,E,...b)=>{const $=b.length?b[0]:E;return l.ctx&&s(l.ctx[_],l.ctx[_]=$)&&(!l.skip_bound&&l.bound[_]&&l.bound[_]($),v&&xt(e,_)),E}):[],l.update(),v=!0,L(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const _=At(t.target);l.fragment&&l.fragment.l(_),_.forEach(W)}else l.fragment&&l.fragment.c();t.intro&&O(e.$$.fragment),tt(e,t.target,t.anchor,t.customElement),wt()}x(c)}class rt{$destroy(){et(this,1),this.$destroy=m}$on(t,n){if(!ht(n))return m;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!yt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const f={};function st(e,t){e!==void 0&&Object.assign(f,{platform:e,...t()})}const Rt=typeof window.go>"u"?void 0:"wails",Lt=()=>({astral_conn_accept:window.go.main.Adapter.ConnAccept,astral_conn_close:window.go.main.Adapter.ConnClose,astral_conn_read:window.go.main.Adapter.ConnRead,astral_conn_write:window.go.main.Adapter.ConnWrite,astral_node_info:window.go.main.Adapter.NodeInfo,astral_query:window.go.main.Adapter.Query,astral_query_name:window.go.main.Adapter.QueryName,astral_resolve:window.go.main.Adapter.Resolve,astral_service_close:window.go.main.Adapter.ServiceClose,astral_service_register:window.go.main.Adapter.ServiceRegister,astral_interrupt:window.go.main.Adapter.Interrupt,sleep:window.go.main.Adapter.Sleep,log:(...e)=>window.go.main.Adapter.LogArr(e)});st(Rt,Lt);const kt=typeof _app_host>"u"?void 0:"android",Ht=()=>{const e=new Map;window._resolve=(n,r)=>{e.get(n)[0](r),e.delete(n)},window._reject=(n,r)=>{e.get(n)[1](r),e.delete(n)};const t=n=>new Promise((r,s)=>e.set(n(),[r,s]));return{astral_node_info:n=>t(()=>_app_host.nodeInfo(n)).then(r=>JSON.parse(r)),astral_conn_accept:n=>t(()=>_app_host.connAccept(n)),astral_conn_close:n=>t(()=>_app_host.connClose(n)),astral_conn_read:n=>t(()=>_app_host.connRead(n)),astral_conn_write:(n,r)=>t(()=>_app_host.connWrite(n,r)),astral_query:(n,r)=>t(()=>_app_host.query(n,r)),astral_query_name:(n,r)=>t(()=>_app_host.queryName(n,r)),astral_resolve:n=>t(()=>_app_host.resolve(n)),astral_service_close:n=>t(()=>_app_host.serviceClose(n)),astral_service_register:n=>t(()=>_app_host.serviceRegister(n)),astral_interrupt:()=>t(()=>_app_host.interrupt()),sleep:n=>t(()=>_app_host.sleep(n)),log:n=>_app_host.logArr(JSON.stringify(n))}};st(kt,Ht);const Qt=typeof _log>"u"?void 0:"common",It=()=>({astral_conn_accept:_astral_conn_accept,astral_conn_close:_astral_conn_close,astral_conn_read:_astral_conn_read,astral_conn_write:_astral_conn_write,astral_node_info:_astral_node_info,astral_query:_astral_query,astral_query_name:_astral_query_name,astral_resolve:_astral_resolve,astral_service_close:_astral_service_close,astral_service_register:_astral_service_register,astral_interrupt:_astral_interrupt,sleep:_sleep,log:_log});st(Qt,It);class k{async register(t){return await f.astral_service_register(t),new Mt(t)}async query(t,n){const r=await f.astral_query(t,n),s=JSON.parse(r);return new y(s,n)}async queryName(t,n){const r=await f.astral_query_name(t,n),s=JSON.parse(r);return new y(s,n)}async nodeInfo(t){return await f.astral_node_info(t)}async resolve(t){return await f.astral_resolve(t)}async interrupt(){await f.astral_interrupt()}}class Mt{constructor(t){this.port=t}async accept(){const t=await f.astral_conn_accept(this.port),n=JSON.parse(t);return new y(n)}async close(){await f.astral_service_close(this.port)}}class y{constructor(t){this.id=t.id,this.query=t.query}async read(){return await f.astral_conn_read(this.id)}async write(t){return await f.astral_conn_write(this.id,t)}async close(){await f.astral_conn_close(this.id)}}const{log:u}=f;y.prototype.rpcCall=async function(e,...t){let n=e;t.length>0&&(n+="?"+JSON.stringify(t)),u(this.id+" conn => "+this.query+"."+n),await this.write(n+`
`)};y.prototype.readJson=async function(e){const t=await this.read(),n=JSON.parse(t);return e!==void 0&&u(this.id+" conn <= "+this.query+":"+t.trimEnd()),n};y.prototype.writeJson=async function(e){const t=JSON.stringify(e);u(this.id+" conn => "+this.query+":"+t.trimEnd()),await this.write(t+`
`)};y.prototype.jsonReader=async function(e){const t=async()=>await this.readJson(e);return t.cancel=async()=>await this.close(),t};y.prototype.bindRpc=async function(){await Bt(this)};async function Bt(e){await e.rpcCall("api");const t=await e.readJson("api");for(let n of t)e[n]=async(...r)=>(await e.rpcCall(n,...r),await e.readJson(n));e.subscribe=async(n,...r)=>(await e.rpcCall(n,...r),e.jsonReader(n))}k.prototype.rpcCall=async function(e,t,n,...r){let s=t;n&&(s+="."+n),r.length>0&&(s+="?"+JSON.stringify(r));const a=await this.query(e,s);return u(a.id+" client => "+s),a};k.prototype.bindRpc=async function(e,t){return await Pt(this,e,t),this};k.prototype.rpcQuery=function(e,t){const n=this;return async function(...r){const s=await n.rpcCall(e,t,"",...r),a=await s.readJson(t);return s.close().catch(u),a}};async function Pt(e,t,n){const r=await e.rpcCall(t,n,"api"),s=await r.readJson("api");r.close().catch(u);for(let a of s)e[a]=async(...o)=>{const i=await e.rpcCall(t,n,a,...o),c=await i.readJson(a);return i.close().catch(u),c};e.subscribe=async(a,...o)=>await(await e.rpcCall(t,n,a,...o)).jsonReader(a)}k.prototype.bindRpcService=async function(e){return await zt.call(this,e)};async function zt(e){const t=Object.getOwnPropertyNames(e.prototype);if(t[0]!=="constructor")throw new Error("Service must have a constructor");const n=t.slice(1,t.length);n.push("api"),e.prototype.api=async()=>n;const r=new e,s=await this.register(r.name+"*");return u("listen "+r.name),Ft.call(r,s).catch(u),s}async function Ft(e){for(;;){const t=await e.accept();u(t.id+" service <= "+t.query),Wt.call(this,t).catch(u)}}async function Wt(e){try{let t=e.query.slice(this.name.length),n=t,r=[];const s=t!=="",a=async i=>await e.writeJson(i),o=async i=>await e.readJson(i);for(;;){s||(t=await e.read(),u(e.id+" service <== "+t)),[n,r]=Yt(t);let i=await this[n](...r,a,o);if(i!==void 0&&await e.writeJson(i),s){e.close().catch(u);break}}}catch(t){u(e.id+" service !! "+e.query+":"+t),e.close().catch(u)}}function Yt(e){e[0]==="."&&(e=e.slice(1));let[t,n]=e.split("?",2),r=[];return n&&(r=JSON.parse(n)),[t,r]}const{log:g,sleep:ae,platform:oe}=f,S=new k,P={launch:S.rpcQuery("","portal.open"),install:S.rpcQuery("","portal.install"),uninstall:S.rpcQuery("","postal.uninstall"),observe:async e=>{const t=await S.query("","portal.observe");return{next:async()=>await t.readJson("observe"),more:async n=>await t.writeJson(n),close:t.close}}};class Zt{constructor(){this.launch=P.launch,this.install=P.install,this.uninstall=P.uninstall}}function Dt(e){let t,n,r,s,a,o,i,c,l,v=e[0].title+"",_,E,b,$=e[0].installed?"(Zainstalowano)":"",Y,at,H,Q=e[0].description+"",Z,D,ot;return{c(){t=h("div"),n=h("div"),r=h("img"),o=K(),i=h("div"),c=h("div"),l=h("h2"),_=M(v),E=K(),b=h("span"),Y=M($),at=K(),H=h("p"),Z=M(Q),ct(r.src,s=e[0].icon)||p(r,"src",s),p(r,"alt",a=e[0].name),p(r,"class","svelte-1vqrebr"),p(n,"class","app-icon svelte-1vqrebr"),p(l,"class","svelte-1vqrebr"),p(b,"class","installed-status svelte-1vqrebr"),p(c,"class","app-name svelte-1vqrebr"),p(H,"class","app-description svelte-1vqrebr"),p(i,"class","app-info svelte-1vqrebr"),p(t,"class","app-item svelte-1vqrebr")},m(w,q){X(w,t,q),d(t,n),d(n,r),d(t,o),d(t,i),d(i,c),d(c,l),d(l,_),d(c,E),d(c,b),d(b,Y),d(i,at),d(i,H),d(H,Z),D||(ot=qt(t,"click",e[1]),D=!0)},p(w,[q]){q&1&&!ct(r.src,s=w[0].icon)&&p(r,"src",s),q&1&&a!==(a=w[0].name)&&p(r,"alt",a),q&1&&v!==(v=w[0].title+"")&&T(_,v),q&1&&$!==($=w[0].installed?"(Zainstalowano)":"")&&T(Y,$),q&1&&Q!==(Q=w[0].description+"")&&T(Z,Q)},i:m,o:m,d(w){w&&W(t),D=!1,ot()}}}function Kt(e,t,n){const r=new Zt;let{app:s={title:"",package:"",name:"",description:"",icon:"",url:"",installed:!1}}=t;const a=()=>r.launch(s.package).catch(g);return e.$$set=o=>{"app"in o&&n(0,s=o.app)},[s,a]}class Tt extends rt{constructor(t){super(),nt(this,t,Kt,Dt,F,{app:0})}}const J=[];function Gt(e,t=m){let n;const r=new Set;function s(i){if(F(e,i)&&(e=i,n)){const c=!J.length;for(const l of r)l[1](),J.push(l,e);if(c){for(let l=0;l<J.length;l+=2)J[l][0](J[l+1]);J.length=0}}}function a(i){s(i(e))}function o(i,c=m){const l=[i,c];return r.add(l),r.size===1&&(n=t(s)||m),i(e),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:o}}class Ut{constructor(){this.apps=[],this.store=Gt([]),this.channel=null,P.observe().catch(g).then(t=>{this.channel=t,this.run().catch(g),this.loadMore()})}async run(){for(;this.channel;){let t;try{t=await this.channel.next()}catch(n){throw g("error: ",JSON.stringify(n)),n}this.apps.push(t),this.store.set(this.apps)}g("close run")}subscribe(t,n){return this.store.subscribe(t,n)}loadMore(t){var n,r;t=t||10,(r=(n=this.channel)==null?void 0:n.more(t))==null||r.catch(g)}cancel(){var t,n;g("cancel"),(n=(t=this.channel)==null?void 0:t.close())==null||n.catch(g),this.channel=null}}function pt(e){e=e||1;const t=window.scrollY,n=document.documentElement.scrollHeight,r=window.innerHeight;return n-t-r<e}function Vt(e){let t=pt(),n=t;n&&e();const r=()=>{n=pt(),!t&&n&&e(),t=n};return document.addEventListener("scroll",r),()=>document.removeEventListener("scroll",r)}function ft(e,t,n){const r=e.slice();return r[2]=t[n],r[4]=n,r}function dt(e){let t,n;return t=new Tt({props:{app:e[2]}}),{c(){gt(t.$$.fragment)},m(r,s){tt(t,r,s),n=!0},p(r,s){const a={};s&1&&(a.app=r[2]),t.$set(a)},i(r){n||(O(t.$$.fragment,r),n=!0)},o(r){z(t.$$.fragment,r),n=!1},d(r){et(t,r)}}}function Xt(e){let t,n,r=e[0],s=[];for(let o=0;o<r.length;o+=1)s[o]=dt(ft(e,r,o));const a=o=>z(s[o],1,1,()=>{s[o]=null});return{c(){t=h("div");for(let o=0;o<s.length;o+=1)s[o].c();p(t,"class","all apps svelte-gkucmm")},m(o,i){X(o,t,i);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);n=!0},p(o,[i]){if(i&1){r=o[0];let c;for(c=0;c<r.length;c+=1){const l=ft(o,r,c);s[c]?(s[c].p(l,i),O(s[c],1)):(s[c]=dt(l),s[c].c(),O(s[c],1),s[c].m(t,null))}for(Et(),c=r.length;c<s.length;c+=1)a(c);St()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)O(s[i]);n=!0}},o(o){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)z(s[i]);n=!1},d(o){o&&W(t),$t(s,o)}}}function te(e,t,n){let r;const s=new Ut;return bt(e,s,a=>n(0,r=a)),Vt(()=>s.loadMore()),mt(()=>s.cancel()),[r,s]}class ee extends rt{constructor(t){super(),nt(this,t,te,Xt,F,{})}}function ne(e){let t,n,r;return n=new ee({}),{c(){t=h("main"),gt(n.$$.fragment),p(t,"class","svelte-vx7f26")},m(s,a){X(s,t,a),tt(n,t,null),r=!0},p:m,i(s){r||(O(n.$$.fragment,s),r=!0)},o(s){z(n.$$.fragment,s),r=!1},d(s){s&&W(t),et(n)}}}function re(e){return mt(S.interrupt),[]}class se extends rt{constructor(t){super(),nt(this,t,re,ne,F,{})}}new se({target:document.getElementById("app")});
