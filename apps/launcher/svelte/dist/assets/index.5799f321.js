(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function w(){}function vt(e){return e()}function dt(){return Object.create(null)}function L(e){e.forEach(vt)}function bt(e){return typeof e=="function"}function Q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let P;function ht(e,t){return P||(P=document.createElement("a")),P.href=t,e===P.href}function Nt(e){return Object.keys(e).length===0}function St(e,...t){if(e==null)return w;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Rt(e,t,n){e.$$.on_destroy.push(St(t,n))}function p(e,t){e.appendChild(t)}function ot(e,t,n){e.insertBefore(t,n||null)}function z(e){e.parentNode&&e.parentNode.removeChild(e)}function Ct(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function _(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function K(){return W(" ")}function Et(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function f(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function xt(e){return Array.from(e.childNodes)}function T(e,t){t=""+t,e.data!==t&&(e.data=t)}let x;function C(e){x=e}function Lt(){if(!x)throw new Error("Function called outside component initialization");return x}function $t(e){Lt().$$.on_destroy.push(e)}const O=[],_t=[];let q=[];const wt=[],It=Promise.resolve();let U=!1;function Mt(){U||(U=!0,It.then(jt))}function V(e){q.push(e)}const G=new Set;let A=0;function jt(){if(A!==0)return;const e=x;do{try{for(;A<O.length;){const t=O[A];A++,C(t),Pt(t.$$)}}catch(t){throw O.length=0,A=0,t}for(C(null),O.length=0,A=0;_t.length;)_t.pop()();for(let t=0;t<q.length;t+=1){const n=q[t];G.has(n)||(G.add(n),n())}q.length=0}while(O.length);for(;wt.length;)wt.pop()();U=!1,G.clear(),C(e)}function Pt(e){if(e.fragment!==null){e.update(),L(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(V)}}function Wt(e){const t=[],n=[];q.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),q=t}const k=new Set;let j;function kt(){j={r:0,c:[],p:j}}function Bt(){j.r||L(j.c),j=j.p}function N(e,t){e&&e.i&&(k.delete(e),e.i(t))}function B(e,t,n,r){if(e&&e.o){if(k.has(e))return;k.add(e),j.c.push(()=>{k.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function At(e){e&&e.c()}function at(e,t,n,r){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n),r||V(()=>{const a=e.$$.on_mount.map(vt).filter(bt);e.$$.on_destroy?e.$$.on_destroy.push(...a):L(a),e.$$.on_mount=[]}),o.forEach(V)}function ct(e,t){const n=e.$$;n.fragment!==null&&(Wt(n.after_update),L(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ht(e,t){e.$$.dirty[0]===-1&&(O.push(e),Mt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function it(e,t,n,r,s,o,a,i=[-1]){const c=x;C(e);const l=e.$$={fragment:null,ctx:[],props:o,update:w,not_equal:s,bound:dt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:dt(),dirty:i,skip_bound:!1,root:t.target||c.$$.root};a&&a(l.root);let m=!1;if(l.ctx=n?n(e,t.props||{},(d,R,...v)=>{const b=v.length?v[0]:R;return l.ctx&&s(l.ctx[d],l.ctx[d]=b)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](b),m&&Ht(e,d)),R}):[],l.update(),m=!0,L(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const d=xt(t.target);l.fragment&&l.fragment.l(d),d.forEach(z)}else l.fragment&&l.fragment.c();t.intro&&N(e.$$.fragment),at(e,t.target,t.anchor,t.customElement),jt()}C(c)}class lt{$destroy(){ct(this,1),this.$destroy=w}$on(t,n){if(!bt(n))return w;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!Nt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const u={};function ut(e,t){e!==void 0&&Object.assign(u,{platform:e,...t()})}const Qt=typeof window.go>"u"?void 0:"wails",zt=()=>({astral_conn_accept:window.go.main.Adapter.ConnAccept,astral_conn_close:window.go.main.Adapter.ConnClose,astral_conn_read:window.go.main.Adapter.ConnRead,astral_conn_write:window.go.main.Adapter.ConnWrite,astral_node_info:window.go.main.Adapter.NodeInfo,astral_query:window.go.main.Adapter.Query,astral_query_name:window.go.main.Adapter.QueryName,astral_resolve:window.go.main.Adapter.Resolve,astral_service_close:window.go.main.Adapter.ServiceClose,astral_service_register:window.go.main.Adapter.ServiceRegister,astral_interrupt:window.go.main.Adapter.Interrupt,sleep:window.go.main.Adapter.Sleep,log:async(...e)=>await window.go.main.Adapter.LogArr(e)});ut(Qt,zt);const Ft=typeof _app_host>"u"?void 0:"android",Yt=()=>{const e=new Map;window._resolve=(n,r)=>{e.get(n)[0](r),e.delete(n)},window._reject=(n,r)=>{e.get(n)[1](r),e.delete(n)};const t=n=>new Promise((r,s)=>e.set(n(),[r,s]));return{astral_node_info:n=>t(()=>_app_host.nodeInfo(n)).then(r=>JSON.parse(r)),astral_conn_accept:n=>t(()=>_app_host.connAccept(n)),astral_conn_close:n=>t(()=>_app_host.connClose(n)),astral_conn_read:n=>t(()=>_app_host.connRead(n)),astral_conn_write:(n,r)=>t(()=>_app_host.connWrite(n,r)),astral_query:(n,r)=>t(()=>_app_host.query(n,r)),astral_query_name:(n,r)=>t(()=>_app_host.queryName(n,r)),astral_resolve:n=>t(()=>_app_host.resolve(n)),astral_service_close:n=>t(()=>_app_host.serviceClose(n)),astral_service_register:n=>t(()=>_app_host.serviceRegister(n)),astral_interrupt:()=>t(()=>_app_host.interrupt()),sleep:n=>t(()=>_app_host.sleep(n)),log:n=>_app_host.logArr(JSON.stringify(n))}};ut(Ft,Yt);const Zt=typeof _log>"u"?void 0:"common",Dt=()=>({astral_conn_accept:_astral_conn_accept,astral_conn_close:_astral_conn_close,astral_conn_read:_astral_conn_read,astral_conn_write:_astral_conn_write,astral_node_info:_astral_node_info,astral_query:_astral_query,astral_query_name:_astral_query_name,astral_resolve:_astral_resolve,astral_service_close:_astral_service_close,astral_service_register:_astral_service_register,astral_interrupt:_astral_interrupt,sleep:_sleep,log:_log});ut(Zt,Dt);class S{async register(t){return await u.astral_service_register(t),new Kt(t)}async query(t,n){n=n||"";const r=await u.astral_query(n,t),s=JSON.parse(r);return new y(s,t)}async queryName(t,n){const r=await u.astral_query_name(t,n),s=JSON.parse(r);return new y(s,n)}async nodeInfo(t){return await u.astral_node_info(t)}async resolve(t){return await u.astral_resolve(t)}async interrupt(){await u.astral_interrupt()}}class Kt{constructor(t){this.port=t}async accept(){const t=await u.astral_conn_accept(this.port),n=JSON.parse(t);return new y(n)}async close(){await u.astral_service_close(this.port)}}class y{constructor(t){this.id=t.id,this.query=t.query}async read(){return await u.astral_conn_read(this.id)}async write(t){return await u.astral_conn_write(this.id,t)}async close(){await u.astral_conn_close(this.id)}}class X extends y{constructor(t){super(t)}async encode(t){let n=JSON.stringify(t);return await super.write(n+`
`)}async decode(){const t=await this.read();return JSON.parse(t)}async call(t,...n){let r=t;n&&(r+="?"+JSON.stringify(n)),await this.write(r+`
`)}async request(t,...n){return await this.call(t,...n),await this.decode()}caller(t){return async(...n)=>await this.call(t,...n)}requester(t){return async(...n)=>await this.request(t,...n)}bind(...t){this.boundMethods=t;for(let n of t)this[n]=this.requester(n);return this}}function Tt(e){let t=Jt(e.handlers);return t=Gt(t),t=Ut(t,e.routes),t}function Jt(e,...t){if(typeof e!="object")return t;const n=Object.getOwnPropertyNames(e);if(n.length===0)return t;const r=[];for(let s of n){const o=e[s],a=Jt(o,...t,s);typeof a[0]=="string"?r.push(a):r.push(...a)}return r}function Gt(e){const t=[];for(let n of e)t.push(n.join("."));return t}function Ut(e,t){t=t||[];let n=[...e];for(let r of t){if(r==="*")return[t];const s=r.length-1;/[*:]/.test(r.slice(s))&&(r=r.slice(0,s)),n=n.filter(o=>!o.startsWith(r))}return t=t.filter(r=>!r.endsWith(":")),n.push(...t),n}const tt=u.log;async function Vt(e,t){const n=Tt(t);for(let r of n){const s=await e.register(r);Xt(t,s).catch(tt)}}async function Xt(e,t){for(;;){let n=await t.accept();n=new X(n),te(e,n).catch(tt).finally(()=>n.close().catch(tt))}}async function te(e,t){const n={...e.handlers,...e.inject,conn:t},r=t.query;let[s,o]=et(e.handlers,r),a=s,i,c;for(;;){if(c=typeof a=="function",o&&!c){await t.writeJson({error:`no handler for query ${o} ${typeof a}`});return}if(o||c){try{i=await ee(n,a,o)}catch(l){i={error:l}}await t.writeJson(i),a=s}o=await t.read(),typeof a=="object"&&([a,o]=et(a,o))}}async function ee(e,t,n){if(t===void 0)throw"undefined handler";switch(typeof t){case"function":const r=JSON.parse(n);return Array.isArray(r)?await t(...r,e):await t(r,e);case"object":return}}function et(e,t){if(t==="")return[e];const[n,r]=ne(t),s=e[n];if(r===void 0)return[s];if(typeof s<"u")return et(s,r);if(typeof e=="function")return[e,r];throw"cannot unfold"}function ne(e){const t=e.search(/[?.{\[]/);if(t===-1)return[e];const n=e.slice(0,t);let r=e.slice(t,e.length);return/^[.?]/.test(r)&&(r=r.slice(1)),[n,r]}const re=u.log;class F extends S{constructor(t,n){super(),this.targetId=t,this.boundMethods=n,this.port=""}async query(t){let n=await super.query(t,this.targetId);return n=new X(n),n}async serve(t){await Vt(this,t)}async call(t,...n){n&&(t+="?"+JSON.stringify(n));const r=await super.query(t,this.targetId);return new X(r)}async request(t,...n){const r=await this.call(t,...n),s=await r.decode();return r.close().catch(re),s}caller(t){return async(...n)=>await this.call(t,...n)}requester(t){return async(...n)=>await this.request(t,...n)}copy(t){return Object.assign(new F,{...this,...t})}target(t){return this.copy({targetId:t})}bind(t,...n){const r=this.copy();for(let s of n){const o=[t,s].join(".");r[s]=r.requester(o)}return r}}y.prototype.readJson=async function(e){const t=await this.read();return JSON.parse(t)};y.prototype.jsonReader=async function(e){const t=async()=>await this.readJson(e);return t.cancel=async()=>await this.close(),t};y.prototype.writeJson=async function(e){const t=JSON.stringify(e);await this.write(t+`
`)};y.prototype.rpcCall=async function(e,...t){let n=e;t.length>0&&(n+="?"+JSON.stringify(t)),await this.write(n+`
`)};y.prototype.rpcQuery=function(e){const t=this;return async function(...n){return await t.rpcCall(e,...n),await t.readJson(e)}};y.prototype.bindRpc=async function(){const e=this;await e.rpcCall("api");const t=await e.readJson("api");for(let n of t)e[n]=async(...r)=>(await e.rpcCall(n,...r),await e.readJson(n));e.subscribe=async(n,...r)=>(await e.rpcCall(n,...r),e.jsonReader(n))};const{log:nt}=u;S.prototype.rpcCall=async function(e,t,n,...r){let s=t;return n&&(s+="."+n),r.length>0&&(s+="?"+JSON.stringify(r)),await this.query(s,e)};S.prototype.rpcQuery=function(e,t){const n=this;return async function(...r){const s=await n.rpcCall(t,e,"",...r),o=await s.readJson(e);return s.close().catch(nt),o}};S.prototype.bindRpc=async function(e,t){const n=this,r=await n.rpcCall(e,t,"api"),s=await r.readJson("api");r.close().catch(nt);for(let o of s)n[o]=async(...a)=>{const i=await n.rpcCall(e,t,o,...a),c=await i.readJson(o);return i.close().catch(nt),c};return n.subscribe=async(o,...a)=>await(await n.rpcCall(e,t,o,...a)).jsonReader(o),n};const{log:H}=u;S.prototype.bindRpcService=async function(e){const t=Object.getOwnPropertyNames(e.prototype);if(t[0]!=="constructor")throw new Error("Service must have a constructor");const n=t.slice(1,t.length);n.push("api"),e.prototype.api=async()=>n;const r=new e,s=await this.register(r.name+"*");return se(r,s).catch(H),s};async function se(e,t){for(;;){const n=await t.accept();try{oe(e,n).catch(H)}catch{n.close().catch(H)}}}async function oe(e,t){let n=t.query.slice(e.name.length),r=n,s=[];const o=n!=="",a=async c=>await t.writeJson(c),i=async c=>await t.readJson(c);for(;;){o||(n=await t.read()),[r,s]=ae(n);let c;try{c=await e[r](...s,a,i)}catch(l){c={error:l}}if(c!==void 0&&await t.writeJson(c),o){t.close().catch(H);break}}}function ae(e){e[0]==="."&&(e=e.slice(1));const t=/[?\[{]/.exec(e),n=e.slice(0,t.index);let r=e.slice(t.index);r[0]==="?"&&(r=r.slice(1));let s=[];return r&&(s=JSON.parse(r)),[n,s]}const rt=u.log;S.prototype.registerRpc=async function(e){const t=ce(e);for(let n of t){const r=await this.register(n);ue(e,r).catch(rt)}};function ce(e){let t=Ot(e.handlers);return t=ie(t),t=le(t,e.routes),t}function Ot(e,...t){if(typeof e!="object")return t;const n=Object.getOwnPropertyNames(e);if(n.length===0)return t;const r=[];for(let s of n){const o=e[s],a=Ot(o,...t,s);typeof a[0]=="string"?r.push(a):r.push(...a)}return r}function ie(e){const t=[];for(let n of e)t.push(n.join("."));return t}function le(e,t){t=t||[];let n=[...e];for(let r of t){const s=r.length-1;/[*:]/.test(r.slice(s))&&(r=r.slice(0,s)),n=n.filter(o=>!o.startsWith(r))}return t=t.filter(r=>!r.endsWith(":")),n.push(...t),n}async function ue(e,t){for(;;){const n=await t.accept();try{fe(e,n).catch(rt)}catch{n.close().catch(rt)}}}async function fe(e,t){const n={...e.handlers,...e.inject,conn:t};let[r,s]=st(e.handlers,t.query),o=r,a,i;for(;;){if(i=typeof o=="function",s&&!i){await t.writeJson({error:`no handler for query ${s} ${typeof o}`});return}if(s||i){try{a=await pe(n,o,s)}catch(c){a={error:c}}await t.writeJson(a),o=r}s=await t.read(),typeof o=="object"&&([o,s]=st(o,s))}}async function pe(e,t,n){if(t===void 0)throw"undefined handler";switch(typeof t){case"function":const r=JSON.parse(n);return Array.isArray(r)?await t(...r,e):await t(r,e);case"object":return}}function st(e,t){const[n,r]=de(t),s=e[n];if(r===void 0)return[s];if(typeof s<"u")return st(s,r);if(typeof e=="function")return[e,r];throw"cannot unfold"}function de(e){const t=e.search(/[?.{\[]/);if(t===-1)return[e];const n=e.slice(0,t);let r=e.slice(t,e.length);return/^[.?]/.test(r)&&(r=r.slice(1)),[n,r]}const{log:h,sleep:Ne,platform:Se}=u,he=new F,qt=new F;h("launcher start");const E=qt.bind("portal","open","install","uninstall");E.observe=async()=>{await h("launcher observe");const e=await qt.query("portal.observe",h);return await h("launcher observe2"),{next:async()=>await e.readJson("observe"),more:async t=>await e.writeJson(t),close:e.close}};class _e{constructor(){this.launch=E.open,this.install=E.install,this.uninstall=E.uninstall}}function we(e){let t,n,r,s,o,a,i,c,l,m=e[0].title+"",d,R,v,b=e[0].installed?"(Zainstalowano)":"",Y,ft,I,M=e[0].description+"",Z,D,pt;return{c(){t=_("div"),n=_("div"),r=_("img"),a=K(),i=_("div"),c=_("div"),l=_("h2"),d=W(m),R=K(),v=_("span"),Y=W(b),ft=K(),I=_("p"),Z=W(M),ht(r.src,s=e[0].icon)||f(r,"src",s),f(r,"alt",o=e[0].name),f(r,"class","svelte-1vqrebr"),f(n,"class","app-icon svelte-1vqrebr"),f(l,"class","svelte-1vqrebr"),f(v,"class","installed-status svelte-1vqrebr"),f(c,"class","app-name svelte-1vqrebr"),f(I,"class","app-description svelte-1vqrebr"),f(i,"class","app-info svelte-1vqrebr"),f(t,"class","app-item svelte-1vqrebr")},m(g,$){ot(g,t,$),p(t,n),p(n,r),p(t,a),p(t,i),p(i,c),p(c,l),p(l,d),p(c,R),p(c,v),p(v,Y),p(i,ft),p(i,I),p(I,Z),D||(pt=Et(t,"click",e[1]),D=!0)},p(g,[$]){$&1&&!ht(r.src,s=g[0].icon)&&f(r,"src",s),$&1&&o!==(o=g[0].name)&&f(r,"alt",o),$&1&&m!==(m=g[0].title+"")&&T(d,m),$&1&&b!==(b=g[0].installed?"(Zainstalowano)":"")&&T(Y,b),$&1&&M!==(M=g[0].description+"")&&T(Z,M)},i:w,o:w,d(g){g&&z(t),D=!1,pt()}}}function ye(e,t,n){const r=new _e;let{app:s={title:"",package:"",name:"",description:"",icon:"",url:"",installed:!1}}=t;const o=()=>r.launch(s.package).catch(h);return e.$$set=a=>{"app"in a&&n(0,s=a.app)},[s,o]}class ge extends lt{constructor(t){super(),it(this,t,ye,we,Q,{app:0})}}const J=[];function me(e,t=w){let n;const r=new Set;function s(i){if(Q(e,i)&&(e=i,n)){const c=!J.length;for(const l of r)l[1](),J.push(l,e);if(c){for(let l=0;l<J.length;l+=2)J[l][0](J[l+1]);J.length=0}}}function o(i){s(i(e))}function a(i,c=w){const l=[i,c];return r.add(l),r.size===1&&(n=t(s)||w),i(e),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:a}}class ve{constructor(){this.apps=[],this.store=me([]),this.channel=null,E.observe().catch(h).then(t=>{this.channel=t,this.run().catch(h),this.loadMore()})}async run(){for(;this.channel;){let t;try{t=await this.channel.next()}catch(n){throw h("error: ",JSON.stringify(n)),n}this.apps.push(t),this.store.set(this.apps)}h("close run")}subscribe(t,n){return this.store.subscribe(t,n)}loadMore(t){var n,r;t=t||10,(r=(n=this.channel)==null?void 0:n.more(t))==null||r.catch(h)}cancel(){var t,n;h("cancel"),(n=(t=this.channel)==null?void 0:t.close())==null||n.catch(h),this.channel=null}}function yt(e){e=e||1;const t=window.scrollY,n=document.documentElement.scrollHeight,r=window.innerHeight;return n-t-r<e}function be(e){let t=yt(),n=t;n&&e();const r=()=>{n=yt(),!t&&n&&e(),t=n};return document.addEventListener("scroll",r),()=>document.removeEventListener("scroll",r)}function gt(e,t,n){const r=e.slice();return r[2]=t[n],r[4]=n,r}function mt(e){let t,n;return t=new ge({props:{app:e[2]}}),{c(){At(t.$$.fragment)},m(r,s){at(t,r,s),n=!0},p(r,s){const o={};s&1&&(o.app=r[2]),t.$set(o)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){ct(t,r)}}}function $e(e){let t,n,r=e[0],s=[];for(let a=0;a<r.length;a+=1)s[a]=mt(gt(e,r,a));const o=a=>B(s[a],1,1,()=>{s[a]=null});return{c(){t=_("div");for(let a=0;a<s.length;a+=1)s[a].c();f(t,"class","all apps svelte-gkucmm")},m(a,i){ot(a,t,i);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(t,null);n=!0},p(a,[i]){if(i&1){r=a[0];let c;for(c=0;c<r.length;c+=1){const l=gt(a,r,c);s[c]?(s[c].p(l,i),N(s[c],1)):(s[c]=mt(l),s[c].c(),N(s[c],1),s[c].m(t,null))}for(kt(),c=r.length;c<s.length;c+=1)o(c);Bt()}},i(a){if(!n){for(let i=0;i<r.length;i+=1)N(s[i]);n=!0}},o(a){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)B(s[i]);n=!1},d(a){a&&z(t),Ct(s,a)}}}function je(e,t,n){let r;const s=new ve;return Rt(e,s,o=>n(0,r=o)),be(()=>s.loadMore()),$t(()=>s.cancel()),[r,s]}class Ae extends lt{constructor(t){super(),it(this,t,je,$e,Q,{})}}function Je(e){let t,n,r;return n=new Ae({}),{c(){t=_("main"),At(n.$$.fragment),f(t,"class","svelte-vx7f26")},m(s,o){ot(s,t,o),at(n,t,null),r=!0},p:w,i(s){r||(N(n.$$.fragment,s),r=!0)},o(s){B(n.$$.fragment,s),r=!1},d(s){s&&z(t),ct(n)}}}function Oe(e){return $t(he.interrupt),[]}class qe extends lt{constructor(t){super(),it(this,t,Oe,Je,Q,{})}}new qe({target:document.getElementById("app")});
